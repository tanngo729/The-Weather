// Simple SCSS baseline you can refine later
@use 'sass:color';

$bg: #0c0c0f; // near-black
$panel: #121216; // dark panel
$panel-2: #181a1f; // darker panel
$text: #f3f4f6; // light text
$muted: #9ca3af; // gray-400
$primary: #ff8a00; // orange accent
$danger: #ef4444; // red-500
$radius: 12px;
$gap: 16px;

// Shared button style
%btn-primary {
  background: linear-gradient(180deg, color.adjust($primary, $lightness: 6%), $primary);
  color: #0b0b0b;
  border: none;
  padding: 10px 14px;
  border-radius: $radius;
  font-weight: 600;
  cursor: pointer;
  transition: transform .05s ease;
  &:active { transform: translateY(1px); }
}

* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans, 'Apple Color Emoji', 'Segoe UI Emoji';
  color: $text;
  background: radial-gradient(1200px 800px at 0% -20%, #101015, transparent),
              radial-gradient(900px 600px at 120% 0%, #0b0c10, transparent),
              linear-gradient(135deg, #0a0a0a, #0d0f14 60%, #0a0a0a);
}

.tone-bright body, .tone-bright {
  background: radial-gradient(1200px 800px at 0% -20%, #162033, transparent),
              radial-gradient(900px 600px at 120% 0%, #0f1b2e, transparent),
              linear-gradient(135deg, #0d1a2b, #11253e 60%, #0d1a2b);
}

.container {
  max-width: 960px;
  margin: 0 auto;
  padding: 24px 16px 48px;
  display: flex;
  flex-direction: column;
  gap: $gap;
  position: relative; z-index: 0;
}

.app-header {
  display: flex;
  flex-direction: column;
  gap: $gap;

  h1 { margin: 0; font-weight: 700; letter-spacing: 0.2px; }

  .city-form {
    display: flex;
    gap: 8px;
    input {
      flex: 1;
      background: $panel-2;
      color: $text;
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: $radius;
      padding: 10px 12px;
      outline: none;
      &:focus { border-color: rgba($primary, 0.6); box-shadow: 0 0 0 3px rgba($primary, 0.15); }
    }
    button { @extend %btn-primary; }
  }

  .location-cta {
    display: flex; align-items: center; gap: 12px; flex-wrap: wrap;
    .btn-gps {
      background: transparent;
      color: $primary;
      border: 1px solid rgba($primary, .4);
      border-radius: $radius;
      padding: 8px 12px;
      cursor: pointer;
      &:disabled { opacity: .5; cursor: not-allowed; }
    }
    .location-label { color: $muted; font-size: .95rem; }
  }
}

// New layout to match reference
.topbar {
  display: grid;
  grid-template-columns: 160px 1fr 220px;
  align-items: center;
  gap: 12px;
  .brand { display: flex; align-items: center; gap: 8px; font-weight: 800; font-size: 1.1rem; opacity: .95; text-transform: lowercase; letter-spacing: .3px; }
  .brand-icon { color: #fff; font-size: 18px; filter: drop-shadow(0 2px 8px rgba(0,0,0,0.35)); }
  .searchbar {
    display: grid; grid-template-columns: auto 1fr auto; gap: 8px; align-items: center;
    background: $panel-2; border: 1px solid rgba(255,255,255,0.12); border-radius: 999px; padding: 8px 12px;
    .s-icon { color: #fff; opacity: .9; }
    input { background: transparent; border: none; outline: none; color: $text; padding: 8px; &::placeholder { color: $muted; } }
    .s-btn { @extend %btn-primary; padding: 8px 14px; }
  }
  .top-actions { display: inline-flex; gap: 8px; justify-self: end; }
  .btn-fx {
    background: rgba(255,255,255,0.06); color: $text; border: 1px solid rgba(255,255,255,0.12); border-radius: 999px; padding: 10px 12px; cursor: pointer;
  }
  .btn-current-loc {
    background: rgba(255,255,255,0.06); color: $text; border: 1px solid rgba(255,255,255,0.12); border-radius: 999px; padding: 10px 14px;
    cursor: pointer; opacity: .95; transition: opacity .2s ease, transform .05s ease; &:active { transform: translateY(1px); }
    &:disabled { opacity: .45; cursor: not-allowed; }
  }
  position: relative; z-index: 2;
}

.layout { display: grid; grid-template-columns: 320px 1fr; gap: 20px; margin-top: 16px; }
.sidebar { display: grid; gap: 16px; position: relative; z-index: 2; }
.main { display: grid; gap: 16px; position: relative; z-index: 2; }

.now-card {
  .now { display: grid; gap: 10px; }
  .now__temp { font-size: 56px; font-weight: 800; letter-spacing: .6px; }
  .now__icon { font-size: 64px; color: #fff; filter: drop-shadow(0 6px 18px rgba(0,0,0,0.35)); }
  .now__desc { text-transform: capitalize; font-weight: 600; opacity: .9; }
  .now__meta { margin-top: 8px; display: grid; gap: 6px; color: $muted; }
  .now__line { display: inline-flex; align-items: center; gap: 8px; }
  .now__line i { color: #fff; opacity: .9; }
  .now__place { font-weight: 800; color: $text; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.12); border-radius: 999px; padding: 4px 10px; }
  .now__time { font-variant-numeric: tabular-nums; letter-spacing: .3px; }
}

// Hide footer on the Now card to avoid redundant time display
.now-card .card__footer { display: none; }

.highlights {
  .hl-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
  .hl-item { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06); border-radius: $radius; padding: 16px; display: grid; gap: 6px; }
  .hl-label { color: $muted; font-size: .9rem; display: inline-flex; align-items: center; gap: 8px; }
  .hl-icon { color: #fff; opacity: .95; }
  .hl-value { font-weight: 800; font-size: 1.25rem; }
}

.hourly {
  .hourly-strip { display: grid; grid-auto-flow: column; grid-auto-columns: minmax(80px, 1fr); overflow-x: auto; gap: 10px; padding-bottom: 4px; }
  .hour { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; padding: 10px; text-align: center; display: grid; gap: 6px; }
  .h { color: $muted; font-size: .85rem; }
  .t { font-weight: 700; }
  .slot-icon { font-size: 24px; color: #fff; }
}

// Horizontal 5-day strip
.forecast-strip {
  .fs-days { display: grid; grid-auto-flow: column; grid-auto-columns: minmax(140px, 1fr); gap: 12px; overflow-x: auto; padding-bottom: 4px; }
  .fs-day { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06); border-radius: $radius; padding: 14px; text-align: center; display: grid; gap: 8px; }
  .fs-name { color: $muted; font-weight: 600; }
  .fs-icon { font-size: 28px; color: #fff; }
  .fs-temps { display: inline-flex; gap: 10px; font-weight: 700; }
  .fs-temps .hi { color: $text; }
  .fs-temps .lo { color: $muted; }
}

// Animated weather overlays
.theme { position: relative; }
.bg-anim { position: fixed; inset: 0; z-index: -1; pointer-events: none; transition: opacity .6s ease, filter .6s ease; mix-blend-mode: screen; }
.fx-low .bg-anim { opacity: .35; filter: saturate(0.7) brightness(0.9); }
.fx-med .bg-anim { opacity: .6;  filter: saturate(0.9) brightness(1); }
.fx-high .bg-anim { opacity: .9; filter: saturate(1.1) brightness(1.05); }
.theme-clear .bg-anim {
  background:
    radial-gradient(700px 700px at 90% -10%, rgba(255,138,0,0.35), transparent 60%),
    radial-gradient(900px 900px at -10% 20%, rgba(255,255,255,0.12), transparent 55%);
  animation: pulseGlow 12s ease-in-out infinite;
}
.theme-clouds .bg-anim {
  background:
    radial-gradient(260px 130px at 30% 20%, rgba(255,255,255,0.12), transparent 60%),
    radial-gradient(300px 150px at 70% 10%, rgba(255,255,255,0.10), transparent 60%),
    radial-gradient(260px 130px at 50% 30%, rgba(255,255,255,0.08), transparent 60%);
  animation: cloudDrift 30s linear infinite;
}
.theme-rain .bg-anim {
  background-image:
    linear-gradient(0deg, rgba(40,70,90,0.15), transparent 70%),
    repeating-linear-gradient(-45deg, rgba(255,255,255,0.1) 0 3px, transparent 3px 9px);
  animation: rainMove 1.2s linear infinite;
}
.theme-snow .bg-anim {
  background-image: radial-gradient(2.5px 2.5px at 20% 10%, rgba(255,255,255,0.9), transparent),
                    radial-gradient(2px 2px at 60% 20%, rgba(255,255,255,0.8), transparent),
                    radial-gradient(3px 3px at 80% 30%, rgba(255,255,255,0.85), transparent);
  animation: snowFall 8s linear infinite;
}
.theme-thunder .bg-anim {
  background: radial-gradient(700px 500px at 80% 0%, rgba(255,255,255,0.12), transparent 60%);
  animation: lightning 6s ease-in-out infinite;
}
.theme-fog .bg-anim {
  background: radial-gradient(900px 600px at 50% 10%, rgba(255,255,255,0.14), transparent 70%);
}
.theme-night .bg-anim {
  background: radial-gradient(2px 2px at 20% 20%, rgba(255,255,255,0.9), transparent),
              radial-gradient(1.5px 1.5px at 70% 40%, rgba(255,255,255,0.8), transparent),
              radial-gradient(2px 2px at 40% 70%, rgba(255,255,255,0.75), transparent);
  animation: stars 20s linear infinite;
}

@keyframes pulseGlow { 0%,100%{opacity:.8} 50%{opacity:1} }
@keyframes cloudDrift { 0%{background-position: 0 0, 0 0, 0 0} 100%{background-position: 200px 0, -200px 0, 100px 0} }
@keyframes rainMove { 0%{background-position: 0 0} 100%{background-position: 0 16px} }
@keyframes snowFall { 0%{background-position: 0 -10px, 0 -20px, 0 -30px} 100%{background-position: 0 600px, 0 600px, 0 600px} }
@keyframes lightning { 0%, 97%, 100%{opacity:.6} 98%{opacity:1} 99%{opacity:.4} }
@keyframes stars { 0%{background-position: 0 0, 0 0, 0 0} 100%{background-position: 200px 100px, -150px 80px, 120px 160px} }

// Video background (behind content, non-blocking)
.bg-video { position: fixed; inset: 0; z-index: -2; pointer-events: none; overflow: hidden; }
.bg-video .bg-media { width: 100%; height: 100%; object-fit: cover; filter: contrast(1.05) saturate(1.05) brightness(0.9); }
.bg-video .bg-gradient { position: absolute; inset: 0; background: radial-gradient(1200px 600px at 50% -10%, rgba(0,0,0,0.35), transparent 60%), linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.2) 40%, rgba(0,0,0,0.45)); z-index: 1; }
.fx-low .bg-video .bg-media { opacity: .35; }
.fx-med .bg-video .bg-media { opacity: .6; }
.fx-high .bg-video .bg-media { opacity: .9; }
.theme-rain .bg-video .bg-media { filter: saturate(1.05) brightness(0.85) contrast(1.1); }
.theme-snow .bg-video .bg-media { filter: saturate(1.05) brightness(0.95); }
.theme-thunder .bg-video .bg-media { filter: brightness(0.85) contrast(1.1); }
.theme-fog .bg-video .bg-media { filter: saturate(0.8) brightness(0.9); }
.theme-night .bg-video .bg-media { filter: saturate(1) brightness(0.8); }

.card {
  background: $panel;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: $radius;
  padding: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  display: flex; flex-direction: column; gap: 12px;
  position: relative; z-index: 2;
  overflow: hidden;

  &__header { display: flex; align-items: center; justify-content: space-between; gap: 12px;
    h2 { margin: 0; font-size: 1.15rem; }
    .controls { display: flex; align-items: center; gap: 10px; }
    label { color: $muted; display: inline-flex; align-items: center; gap: 6px; }
    button { @extend %btn-primary; }
  }
  &__footer { color: $muted; }
}

.current-weather {
  .weather-row {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 16px;
    align-items: center;
  }
  .left {
    .temp { font-size: 56px; font-weight: 700; line-height: 1; }
    .meta { color: $muted; margin-top: 6px; }
    .desc { margin-top: 4px; font-weight: 600; }
  }
  .right { color: $muted; display: grid; gap: 4px; }
}

.forecast {
  .days { display: grid; grid-template-columns: repeat( auto-fit, minmax(180px, 1fr) ); gap: 12px; }
  .day {
    background: $panel;
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: $radius;
    padding: 10px;
    h3 { margin: 0 0 8px; font-size: 1rem; color: $text; }
    .slots { display: grid; grid-template-columns: repeat( auto-fill, minmax(72px, 1fr) ); gap: 8px; }
    .slot { background: $panel-2; border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; padding: 8px; text-align: center; display: grid; gap: 6px; }
    .slot-icon { font-size: 22px; color: #fff; }
    .t { color: $muted; font-size: .85rem; }
    .v { font-weight: 600; }
  }
}

.error { color: $danger; }

// Loading overlay + spinner
.loading-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(2px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
  animation: fadeIn .2s ease forwards;
}

.spinner {
  width: 32px; height: 32px;
  border: 3px solid rgba(255,255,255,0.2);
  border-top-color: $primary;
  border-radius: 50%;
  animation: spin 0.9s linear infinite;
}

@keyframes spin { to { transform: rotate(360deg); } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

@media (max-width: 640px) {
  .current-weather .weather-row { grid-template-columns: 1fr; }
}
// Ensure background video stays behind content
.bg-video { position: fixed; inset: 0; z-index: -1; pointer-events: none; overflow: hidden; }
.bg-video .bg-media { width: 100%; height: 100%; object-fit: cover; filter: contrast(1.05) saturate(1.05) brightness(0.92); }
.tone-bright .bg-video .bg-media { filter: contrast(1.05) saturate(1.1) brightness(1.0); }
.bg-video .bg-gradient { position: absolute; inset: 0; background: radial-gradient(1200px 600px at 50% -10%, rgba(0,0,0,0.28), transparent 60%), linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.15) 40%, rgba(0,0,0,0.35)); z-index: 1; }
.tone-bright .bg-video .bg-gradient { background: radial-gradient(1200px 600px at 50% -10%, rgba(0,0,0,0.18), transparent 60%), linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.1) 40%, rgba(0,0,0,0.25)); }
.fx-low .bg-video .bg-media { opacity: .35; }
.fx-med .bg-video .bg-media { opacity: .6; }
.fx-high .bg-video .bg-media { opacity: .9; }
.theme-rain .bg-video .bg-media { filter: saturate(1.05) brightness(0.85) contrast(1.1); }
.theme-snow .bg-video .bg-media { filter: saturate(1.05) brightness(0.95); }
.theme-thunder .bg-video .bg-media { filter: brightness(0.85) contrast(1.1); }
.theme-fog .bg-video .bg-media { filter: saturate(0.8) brightness(0.9); }
.theme-night .bg-video .bg-media { filter: saturate(1) brightness(0.8); }

/* Accent aurora behind content for more depth */
.container::before {
  content: '';
  position: fixed;
  inset: -10% -10% auto -10%;
  height: 60vh;
  z-index: 1;
  pointer-events: none;
  background: radial-gradient(40% 60% at 20% 20%, rgba(255,138,0,.18), transparent 60%),
              radial-gradient(30% 40% at 80% 10%, rgba(0,180,255,.12), transparent 60%);
  animation: aurora 14s ease-in-out infinite alternate;
}
@keyframes aurora { from { transform: translateY(-10px); } to { transform: translateY(10px); } }

/* Slightly transparent cards for readability over video */
.card { background: rgba(18,18,22,0.82); }
.tone-bright .card { background: rgba(22,26,34,0.78); }
.forecast .day { background: rgba(18,18,22,0.82); }
.tone-bright .forecast .day { background: rgba(22,26,34,0.78); }
.forecast .day .slot { background: rgba(24,26,31,0.78); }
.tone-bright .forecast .day .slot { background: rgba(28,32,40,0.72); }
.highlights .hl-item { background: rgba(18,18,22,0.82); backdrop-filter: blur(4px); }
.tone-bright .highlights .hl-item { background: rgba(22,26,34,0.78); }
