// Simple SCSS baseline you can refine later
@use 'sass:color';

$bg: #0f172a; // slate-900 - deep but not harsh
$panel: #1e293b; // slate-800 - warmer dark
$panel-2: #334155; // slate-700 - lighter contrast
$text: #f8fafc; // slate-50 - softer white
$muted: #64748b; // slate-500 - balanced gray
$primary: #06b6d4; // cyan-500 - fresh and modern
$success: #10b981; // emerald-500 - natural green
$warning: #f59e0b; // amber-500 - warm orange
$danger: #ef4444; // red-500
$radius: 12px;
$gap: 16px;

// Shared button style
%btn-primary {
  background: linear-gradient(135deg, $primary, color.adjust($primary, $lightness: -8%));
  color: #ffffff;
  border: none;
  padding: 10px 14px;
  border-radius: $radius;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
  box-shadow: 0 2px 8px rgba($primary, 0.25);
  &:hover { transform: translateY(-1px); box-shadow: 0 4px 16px rgba($primary, 0.35); }
  &:active { transform: translateY(0); }
}

* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans, 'Apple Color Emoji', 'Segoe UI Emoji';
  color: $text;
  background: radial-gradient(1200px 800px at 0% -20%, rgba(6,182,212,0.08), transparent),
              radial-gradient(900px 600px at 120% 0%, rgba(59,130,246,0.06), transparent),
              linear-gradient(135deg, #0f172a, #1e293b 40%, #0f172a);
}

.tone-bright body, .tone-bright {
  background: radial-gradient(1200px 800px at 0% -20%, rgba(6,182,212,0.12), transparent),
              radial-gradient(900px 600px at 120% 0%, rgba(59,130,246,0.08), transparent),
              linear-gradient(135deg, #0f172a, #334155 40%, #1e293b);
}

.container {
  max-width: 960px;
  margin: 0 auto;
  padding: 24px 16px 48px;
  display: flex;
  flex-direction: column;
  gap: $gap;
  position: relative;
  z-index: 0;
}

.app-header {
  display: flex;
  flex-direction: column;
  gap: $gap;

  h1 { margin: 0; font-weight: 700; letter-spacing: 0.2px; }

  .city-form {
    display: flex;
    gap: 8px;
    input {
      flex: 1;
      background: $panel-2;
      color: $text;
      border: 1px solid rgba(6,182,212,0.2);
      border-radius: $radius;
      padding: 10px 12px;
      outline: none;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
      &:focus { border-color: $primary; box-shadow: 0 0 0 3px rgba($primary, 0.15); }
      &::placeholder { color: rgba($muted, 0.7); }
    }
    button { @extend %btn-primary; }
  }

  .location-cta {
    display: flex; align-items: center; gap: 12px; flex-wrap: wrap;
    .btn-gps {
      background: transparent;
      color: $primary;
      border: 1px solid rgba($primary, .4);
      border-radius: $radius;
      padding: 8px 12px;
      cursor: pointer;
      &:disabled { opacity: .5; cursor: not-allowed; }
    }
    .location-label { color: $muted; font-size: .95rem; }
  }
}

// New layout to match reference
.topbar {
  display: grid;
  grid-template-columns: 160px 1fr 220px;
  align-items: center;
  gap: 12px;
  position: relative;
  z-index: 10000;
  .brand { display: flex; align-items: center; gap: 8px; font-weight: 800; font-size: 1.1rem; opacity: .95; text-transform: lowercase; letter-spacing: .3px; }
  .brand-icon { color: #fff; font-size: 18px; filter: drop-shadow(0 2px 8px rgba(0,0,0,0.35)); }
  .searchbar {
    display: grid; grid-template-columns: auto 1fr auto; gap: 8px; align-items: center;
    background: rgba(51,65,85,0.8); backdrop-filter: blur(8px); border: 1px solid rgba(6,182,212,0.2); border-radius: 999px; padding: 8px 12px;
    transition: border-color 0.2s ease;
    &:focus-within { border-color: $primary; }
    .s-icon { color: $primary; opacity: .8; }
    input { background: transparent; border: none; outline: none; color: $text; padding: 8px; &::placeholder { color: rgba($muted, 0.7); } }
    .s-btn { @extend %btn-primary; padding: 8px 14px; }
  }
  .top-actions { display: inline-flex; gap: 8px; justify-self: end; }
  .btn-fx {
    background: rgba(255,255,255,0.06); color: $text; border: 1px solid rgba(255,255,255,0.12); border-radius: 999px; padding: 10px 12px; cursor: pointer;
  }
  .btn-current-loc {
    background: rgba(255,255,255,0.06); color: $text; border: 1px solid rgba(255,255,255,0.12); border-radius: 999px; padding: 10px 14px;
    cursor: pointer; opacity: .95; transition: opacity .2s ease, transform .05s ease; &:active { transform: translateY(1px); }
    &:disabled { opacity: .45; cursor: not-allowed; }
  }
  position: relative; z-index: 2;
}

.layout { display: grid; grid-template-columns: 320px 1fr; gap: 20px; margin-top: 16px; }
.sidebar { display: grid; gap: 16px; position: relative; z-index: 1; }
.main { display: grid; gap: 16px; position: relative; z-index: 1; }

.now-card {
  .now { display: grid; gap: 10px; }
  .now__temp { font-size: 56px; font-weight: 800; letter-spacing: .6px; }
  .now__icon { font-size: 64px; color: #fff; filter: drop-shadow(0 6px 18px rgba(0,0,0,0.35)); }
  .now__desc { text-transform: capitalize; font-weight: 600; opacity: .9; }
  .now__meta { margin-top: 8px; display: grid; gap: 6px; color: $muted; }
  .now__line { display: inline-flex; align-items: center; gap: 8px; }
  .now__line i { color: #fff; opacity: .9; }
  .now__place { font-weight: 800; color: $text; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.12); border-radius: 999px; padding: 4px 10px; }
  .now__time { font-variant-numeric: tabular-nums; letter-spacing: .3px; }
}

// Hide footer on the Now card to avoid redundant time display
.now-card .card__footer { display: none; }

.highlights {
  .hl-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
  .hl-item { background: rgba(51,65,85,0.6); backdrop-filter: blur(4px); border: 1px solid rgba(6,182,212,0.1); border-radius: $radius; padding: 16px; display: grid; gap: 6px; transition: transform 0.2s ease; &:hover { transform: translateY(-2px); } }
  .hl-label { color: $muted; font-size: .9rem; display: inline-flex; align-items: center; gap: 8px; }
  .hl-icon { color: #fff; opacity: .95; }
  .hl-value { font-weight: 800; font-size: 1.25rem; }
}

.hourly {
  .hourly-strip { display: grid; grid-auto-flow: column; grid-auto-columns: minmax(80px, 1fr); overflow-x: auto; gap: 10px; padding-bottom: 4px; }
  .hour { background: rgba(51,65,85,0.6); backdrop-filter: blur(4px); border: 1px solid rgba(6,182,212,0.1); border-radius: 12px; padding: 10px; text-align: center; display: grid; gap: 6px; transition: transform 0.2s ease; &:hover { transform: translateY(-2px); } }
  .h { color: $muted; font-size: .85rem; }
  .t { font-weight: 700; }
  .slot-icon { font-size: 24px; color: #fff; }
}

// Horizontal 5-day strip
.forecast-strip {
  .fs-days { display: grid; grid-auto-flow: column; grid-auto-columns: minmax(140px, 1fr); gap: 12px; overflow-x: auto; padding-bottom: 4px; }
  .fs-day { background: rgba(51,65,85,0.6); backdrop-filter: blur(4px); border: 1px solid rgba(6,182,212,0.1); border-radius: $radius; padding: 14px; text-align: center; display: grid; gap: 8px; transition: transform 0.2s ease; &:hover { transform: translateY(-2px); } }
  .fs-name { color: $muted; font-weight: 600; }
  .fs-icon { font-size: 28px; color: #fff; }
  .fs-temps { display: inline-flex; gap: 10px; font-weight: 700; }
  .fs-temps .hi { color: $text; }
  .fs-temps .lo { color: $muted; }
}

// Enhanced animated weather overlays
.theme { position: relative; }
.bg-anim {
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  transition: opacity .8s ease, filter .8s ease;
  mix-blend-mode: screen;
}
.fx-low .bg-anim { opacity: .4; filter: saturate(0.8) brightness(0.9); }
.fx-med .bg-anim { opacity: .65; filter: saturate(1) brightness(1.05); }
.fx-high .bg-anim { opacity: .85; filter: saturate(1.2) brightness(1.1); }

.theme-clear .bg-anim {
  background:
    radial-gradient(800px 800px at 85% -5%, rgba(255,200,50,0.4), transparent 65%),
    radial-gradient(1000px 1000px at -5% 25%, rgba(255,255,255,0.15), transparent 60%),
    radial-gradient(600px 600px at 50% 100%, rgba(255,165,0,0.2), transparent 50%);
  animation: sunGlow 15s ease-in-out infinite;
}

.theme-clouds .bg-anim {
  background:
    radial-gradient(300px 150px at 20% 15%, rgba(255,255,255,0.15), transparent 70%),
    radial-gradient(400px 200px at 80% 20%, rgba(255,255,255,0.12), transparent 70%),
    radial-gradient(350px 175px at 50% 40%, rgba(255,255,255,0.10), transparent 70%),
    radial-gradient(280px 140px at 30% 70%, rgba(255,255,255,0.08), transparent 70%);
  animation: cloudDrift 35s linear infinite, cloudPulse 8s ease-in-out infinite alternate;
}

.theme-rain .bg-anim {
  background-image:
    linear-gradient(0deg, rgba(30,60,90,0.2), transparent 80%),
    repeating-linear-gradient(-15deg, rgba(100,150,200,0.15) 0 1px, transparent 1px 12px),
    repeating-linear-gradient(-25deg, rgba(150,200,255,0.1) 0 1px, transparent 1px 15px),
    repeating-linear-gradient(-35deg, rgba(200,230,255,0.08) 0 1px, transparent 1px 18px);
  animation: rainFall 0.8s linear infinite, windSway 3s ease-in-out infinite alternate;
}

.theme-snow .bg-anim {
  background-image:
    radial-gradient(3px 3px at 15% 8%, rgba(255,255,255,0.95), transparent),
    radial-gradient(2.5px 2.5px at 65% 15%, rgba(255,255,255,0.9), transparent),
    radial-gradient(4px 4px at 35% 25%, rgba(255,255,255,0.85), transparent),
    radial-gradient(2px 2px at 85% 35%, rgba(255,255,255,0.8), transparent),
    radial-gradient(3.5px 3.5px at 20% 50%, rgba(255,255,255,0.9), transparent),
    radial-gradient(2.5px 2.5px at 70% 60%, rgba(255,255,255,0.85), transparent),
    radial-gradient(3px 3px at 45% 75%, rgba(255,255,255,0.8), transparent),
    radial-gradient(2px 2px at 90% 80%, rgba(255,255,255,0.75), transparent);
  animation: snowFall 12s linear infinite, snowSway 4s ease-in-out infinite alternate;
}

.theme-thunder .bg-anim {
  background:
    radial-gradient(800px 600px at 70% -10%, rgba(100,100,200,0.15), transparent 70%),
    radial-gradient(1000px 800px at 30% 20%, rgba(150,150,255,0.1), transparent 60%);
  animation: lightning 4s ease-in-out infinite, thunderPulse 2s ease-in-out infinite alternate;
}

.theme-fog .bg-anim {
  background:
    radial-gradient(1200px 800px at 40% 0%, rgba(255,255,255,0.18), transparent 80%),
    radial-gradient(1000px 600px at 80% 30%, rgba(240,240,255,0.15), transparent 70%),
    radial-gradient(800px 500px at 20% 60%, rgba(255,255,255,0.12), transparent 75%);
  animation: fogDrift 25s linear infinite, fogPulse 6s ease-in-out infinite alternate;
}

.theme-night .bg-anim {
  background:
    radial-gradient(2px 2px at 15% 20%, rgba(255,255,255,0.95), transparent),
    radial-gradient(1.5px 1.5px at 75% 25%, rgba(200,200,255,0.9), transparent),
    radial-gradient(2.5px 2.5px at 35% 40%, rgba(255,255,255,0.85), transparent),
    radial-gradient(1px 1px at 85% 50%, rgba(180,180,255,0.8), transparent),
    radial-gradient(2px 2px at 25% 65%, rgba(255,255,255,0.9), transparent),
    radial-gradient(1.5px 1.5px at 65% 75%, rgba(220,220,255,0.85), transparent),
    radial-gradient(2.5px 2.5px at 90% 15%, rgba(255,255,255,0.8), transparent),
    radial-gradient(1px 1px at 45% 85%, rgba(200,200,255,0.75), transparent);
  animation: starsTwinkle 25s linear infinite, starsShimmer 3s ease-in-out infinite alternate;
}

// Enhanced weather animations
@keyframes sunGlow {
  0%, 100% { opacity: 0.8; filter: brightness(1) saturate(1); }
  50% { opacity: 1; filter: brightness(1.1) saturate(1.2); }
}

@keyframes cloudDrift {
  0% { background-position: 0 0, 0 0, 0 0, 0 0; }
  25% { background-position: 100px 10px, -50px 5px, 75px -5px, 120px 8px; }
  50% { background-position: 200px 0, -100px 0, 150px 0, 240px 0; }
  75% { background-position: 300px -10px, -150px -5px, 225px 5px, 360px -8px; }
  100% { background-position: 400px 0, -200px 0, 300px 0, 480px 0; }
}

@keyframes cloudPulse {
  0% { opacity: 0.6; }
  100% { opacity: 0.8; }
}

@keyframes rainFall {
  0% { background-position: 0 0, 0 0, 0 0; }
  100% { background-position: 0 20px, 0 25px, 0 30px; }
}

@keyframes windSway {
  0% { transform: skewX(0deg); }
  100% { transform: skewX(-2deg); }
}

@keyframes snowFall {
  0% { background-position: 0 -20px, 0 -25px, 0 -30px, 0 -15px, 0 -35px, 0 -40px, 0 -28px, 0 -18px; }
  100% { background-position: 0 800px, 0 850px, 0 900px, 0 750px, 0 950px, 0 1000px, 0 880px, 0 720px; }
}

@keyframes snowSway {
  0% { transform: translateX(0); }
  100% { transform: translateX(10px); }
}

@keyframes lightning {
  0%, 94%, 100% { opacity: 0.6; }
  95% { opacity: 1; filter: brightness(1.5); }
  96% { opacity: 0.4; }
  97% { opacity: 1.2; filter: brightness(1.8); }
  98% { opacity: 0.3; }
}

@keyframes thunderPulse {
  0% { filter: brightness(1); }
  100% { filter: brightness(1.2); }
}

@keyframes fogDrift {
  0% { background-position: 0 0, 0 0, 0 0; transform: scale(1); }
  33% { background-position: -200px 20px, 150px -10px, -100px 30px; transform: scale(1.05); }
  66% { background-position: -400px -15px, 300px 25px, -200px -20px; transform: scale(0.98); }
  100% { background-position: -600px 0, 450px 0, -300px 0; transform: scale(1); }
}

@keyframes fogPulse {
  0% { opacity: 0.5; }
  100% { opacity: 0.7; }
}

@keyframes starsTwinkle {
  0% { background-position: 0 0, 0 0, 0 0, 0 0, 0 0, 0 0, 0 0, 0 0; }
  25% { background-position: 50px 25px, -30px 40px, 70px -20px, -45px 60px, 90px 35px, -25px -15px, 110px 50px, -60px 30px; }
  50% { background-position: 100px 50px, -60px 80px, 140px -40px, -90px 120px, 180px 70px, -50px -30px, 220px 100px, -120px 60px; }
  75% { background-position: 150px 75px, -90px 120px, 210px -60px, -135px 180px, 270px 105px, -75px -45px, 330px 150px, -180px 90px; }
  100% { background-position: 200px 100px, -120px 160px, 280px -80px, -180px 240px, 360px 140px, -100px -60px, 440px 200px, -240px 120px; }
}

@keyframes starsShimmer {
  0% { opacity: 0.7; filter: brightness(1); }
  100% { opacity: 0.9; filter: brightness(1.3); }
}

// Video background (behind content, non-blocking)
.bg-video { position: fixed; inset: 0; z-index: -2; pointer-events: none; overflow: hidden; }
.bg-video .bg-media { width: 100%; height: 100%; object-fit: cover; filter: contrast(1.05) saturate(1.05) brightness(0.9); }
.bg-video .bg-gradient { position: absolute; inset: 0; background: radial-gradient(1200px 600px at 50% -10%, rgba(0,0,0,0.35), transparent 60%), linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.2) 40%, rgba(0,0,0,0.45)); z-index: 1; }
.fx-low .bg-video .bg-media { opacity: .35; }
.fx-med .bg-video .bg-media { opacity: .6; }
.fx-high .bg-video .bg-media { opacity: .9; }
.theme-rain .bg-video .bg-media { filter: saturate(1.05) brightness(0.85) contrast(1.1); }
.theme-snow .bg-video .bg-media { filter: saturate(1.05) brightness(0.95); }
.theme-thunder .bg-video .bg-media { filter: brightness(0.85) contrast(1.1); }
.theme-fog .bg-video .bg-media { filter: saturate(0.8) brightness(0.9); }
.theme-night .bg-video .bg-media { filter: saturate(1) brightness(0.8); }

.card {
  background: rgba(30,41,59,0.85);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(6,182,212,0.15);
  border-radius: $radius;
  padding: 16px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.3), 0 1px 0 rgba(248,250,252,0.05) inset;
  display: flex; flex-direction: column; gap: 12px;
  position: relative; z-index: 2;
  overflow: hidden;

  &__header { display: flex; align-items: center; justify-content: space-between; gap: 12px;
    h2 { margin: 0; font-size: 1.15rem; }
    .controls { display: flex; align-items: center; gap: 10px; }
    label { color: $muted; display: inline-flex; align-items: center; gap: 6px; }
    button { @extend %btn-primary; }
  }
  &__footer { color: $muted; }
}

.current-weather {
  .weather-row {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 16px;
    align-items: center;
  }
  .left {
    .temp { font-size: 56px; font-weight: 700; line-height: 1; }
    .meta { color: $muted; margin-top: 6px; }
    .desc { margin-top: 4px; font-weight: 600; }
  }
  .right { color: $muted; display: grid; gap: 4px; }
}

.forecast {
  .days { display: grid; grid-template-columns: repeat( auto-fit, minmax(180px, 1fr) ); gap: 12px; }
  .day {
    background: $panel;
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: $radius;
    padding: 10px;
    h3 { margin: 0 0 8px; font-size: 1rem; color: $text; }
    .slots { display: grid; grid-template-columns: repeat( auto-fill, minmax(72px, 1fr) ); gap: 8px; }
    .slot { background: $panel-2; border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; padding: 8px; text-align: center; display: grid; gap: 6px; }
    .slot-icon { font-size: 22px; color: #fff; }
    .t { color: $muted; font-size: .85rem; }
    .v { font-weight: 600; }
  }
}

.error { color: $danger; }

// Location loading overlay
.location-loading {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 20000;
  backdrop-filter: blur(4px);

  .loading-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    background: rgba(18, 18, 22, 0.9);
    padding: 32px;
    border-radius: 16px;
    border: 1px solid rgba(255,255,255,0.1);

    .spinner {
      width: 48px;
      height: 48px;
      border: 4px solid rgba(255,138,0,0.3);
      border-top: 4px solid $primary;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    span {
      color: $text;
      font-weight: 500;
      font-size: 16px;
    }
  }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

// Toast notifications
.toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 25000;
  pointer-events: none;
}

.toast {
  background: rgba(36, 41, 56, 0.95);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 12px;
  margin-bottom: 12px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.4);
  pointer-events: auto;
  animation: toastSlideIn 0.3s ease-out;
  max-width: 400px;

  &--error {
    border-left: 4px solid $danger;
  }

  &--exit {
    animation: toastSlideOut 0.3s ease-in forwards;
  }

  &__content {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 20px;
  }

  &__icon {
    color: $danger;
    font-size: 18px;
    flex-shrink: 0;
  }

  &__message {
    color: $text;
    font-weight: 500;
    font-size: 14px;
    line-height: 1.4;
  }
}

@keyframes toastSlideIn {
  0% {
    transform: translateX(100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes toastSlideOut {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  100% {
    transform: translateX(100%);
    opacity: 0;
  }
}

// Suggestions dropdown
.suggestions {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: rgba(36, 41, 56, 0.95);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: $radius;
  box-shadow: 0 8px 32px rgba(0,0,0,0.4);
  z-index: 9999;
  max-height: 240px;
  overflow-y: auto;
  margin-top: 4px;

  // Custom scrollbar
  &::-webkit-scrollbar {
    width: 8px;
  }

  &::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
    border-radius: 4px;
  }

  &::-webkit-scrollbar-thumb {
    background: rgba(59,130,246,0.6);
    border-radius: 4px;
    transition: background 0.2s ease;

    &:hover {
      background: rgba(59,130,246,0.8);
    }
  }

  // Firefox scrollbar
  scrollbar-width: thin;
  scrollbar-color: rgba(59,130,246,0.6) rgba(255,255,255,0.05);
}

.suggestion-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  cursor: pointer;
  transition: all 0.15s ease;
  border-bottom: 1px solid rgba(255,255,255,0.05);

  &:last-child {
    border-bottom: none;
  }

  &:hover {
    background: rgba(255,255,255,0.08);
    transform: translateX(2px);
  }

  .suggestion-icon {
    color: $primary;
    font-size: 14px;
    width: 16px;
    text-align: center;
  }

  .suggestion-text {
    color: $text;
    font-weight: 500;
    font-size: 14px;
  }
}

// Loading overlay + spinner
.loading-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(2px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
  animation: fadeIn .2s ease forwards;
}

.spinner {
  width: 32px; height: 32px;
  border: 3px solid rgba(255,255,255,0.2);
  border-top-color: $primary;
  border-radius: 50%;
  animation: spin 0.9s linear infinite;
}

@keyframes spin { to { transform: rotate(360deg); } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

@media (max-width: 640px) {
  .current-weather .weather-row { grid-template-columns: 1fr; }
}
// Ensure background video stays behind content
.bg-video { position: fixed; inset: 0; z-index: -1; pointer-events: none; overflow: hidden; }
.bg-video .bg-media { width: 100%; height: 100%; object-fit: cover; filter: contrast(1.05) saturate(1.05) brightness(0.92); }
.tone-bright .bg-video .bg-media { filter: contrast(1.05) saturate(1.1) brightness(1.0); }
.bg-video .bg-gradient { position: absolute; inset: 0; background: radial-gradient(1200px 600px at 50% -10%, rgba(0,0,0,0.28), transparent 60%), linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.15) 40%, rgba(0,0,0,0.35)); z-index: 1; }
.tone-bright .bg-video .bg-gradient { background: radial-gradient(1200px 600px at 50% -10%, rgba(0,0,0,0.18), transparent 60%), linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.1) 40%, rgba(0,0,0,0.25)); }
.fx-low .bg-video .bg-media { opacity: .35; }
.fx-med .bg-video .bg-media { opacity: .6; }
.fx-high .bg-video .bg-media { opacity: .9; }
.theme-rain .bg-video .bg-media { filter: saturate(1.05) brightness(0.85) contrast(1.1); }
.theme-snow .bg-video .bg-media { filter: saturate(1.05) brightness(0.95); }
.theme-thunder .bg-video .bg-media { filter: brightness(0.85) contrast(1.1); }
.theme-fog .bg-video .bg-media { filter: saturate(0.8) brightness(0.9); }
.theme-night .bg-video .bg-media { filter: saturate(1) brightness(0.8); }

/* Accent aurora behind content for more depth */
.container::before {
  content: '';
  position: fixed;
  inset: -10% -10% auto -10%;
  height: 60vh;
  z-index: 1;
  pointer-events: none;
  background: radial-gradient(40% 60% at 20% 20%, rgba(255,138,0,.18), transparent 60%),
              radial-gradient(30% 40% at 80% 10%, rgba(0,180,255,.12), transparent 60%);
  animation: aurora 14s ease-in-out infinite alternate;
}
@keyframes aurora { from { transform: translateY(-10px); } to { transform: translateY(10px); } }

/* Slightly transparent cards for readability over video */
.card { background: rgba(18,18,22,0.82); }
.tone-bright .card { background: rgba(22,26,34,0.78); }
.forecast .day { background: rgba(18,18,22,0.82); }
.tone-bright .forecast .day { background: rgba(22,26,34,0.78); }
.forecast .day .slot { background: rgba(24,26,31,0.78); }
.tone-bright .forecast .day .slot { background: rgba(28,32,40,0.72); }
.highlights .hl-item { background: rgba(18,18,22,0.82); backdrop-filter: blur(4px); }
.tone-bright .highlights .hl-item { background: rgba(22,26,34,0.78); }
